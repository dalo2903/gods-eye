<style>
  .navbar-default{
    background-color:#0B0C10;
    color:
  }
</style>
<style>
  @media only screen and (max-width:767px) {
      .fixed-width{
          /* width: auto; */
      }
  }
  @media only screen and (min-width:768px) {
      .fixed-width {
          /* width: 1196px; */
      }
  }
  @import url('https://fonts.googleapis.com/css?family=Anton&subset=vietnamese');
    .nav li>a{
      font-family: 'Anton', sans-serif;
      font-weight: 600;
  }
  </style>

<nav class="navbar navbar-default navbar-transparent navbar-fixed-top navbar-color-on-scroll" color-on-scroll=" " id="sectionsNav">
  <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
    </button>
    
        <a class="navbar-brand" href="/">
        <i style="color:white" class="fa fa-shield-alt" aria-hidden="true"></i>Háº»m Security</a>
      </div>

      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
        <li>
        <a href="index.html">
          <i class="material-icons">apps</i> About us
        </a>
      </li>

      <li>
        <a href="/sign-in">
          <i class="material-icons">account_circle</i> Sign in
        </a>
      </li>

      <li class="button-container">
        <a href="/sign-up" target="_blank" class="btn btn-rose btn-round">
           Sign up
        </a>
      </li>
        </ul>
      </div>
  </div>
</nav>





<script src="/javascripts/header.js"></script>

<script>
  // Get the modal
  var modal = document.getElementById('id01');

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function (event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }
</script>

<script>
  var provider = new firebase.auth.GoogleAuthProvider()

  function signIn() {
    firebase.auth().signInWithRedirect(provider)
  }

  $(document).ready(function () {
    firebase.auth().getRedirectResult().then(function (result) {
      if (result.credential) {
        // This gives you a Google Access Token. You can use it to access the Google API.
        var token = result.credential.accessToken
        // ...
      }
      // The signed-in user info.
      var user = result.user
      if (user) {
        var ref = firebase.database().ref().child("user");
        var data = {
          email: user.email,
          name: user.displayName,
          photoURL: user.photoURL,
          studentID: ''
        }

        if (result.additionalUserInfo.isNewUser) {
          ref.child(user.uid).set(data).then(function (ref) {
            //use 'child' and 'set' combination to save data in your own generated key
            $.post('/api/person/', {
              name: user.displayName,
              userData: user.uid
            },
              function (data, status) {
                console.log(data)
              })
          }, function (error) {
            console.log(error)
          })
        }


        user.getIdToken(/* forceRefresh */ true).then(function (idToken) {
          // Send token to your backend via HTTP
          // ...
          $.post('/api/auth',
            {
              idToken: idToken
            },
            function (data, status) {
              if (result.additionalUserInfo.isNewUser) {
                return window.location.href = '/my-profile'
              } else {
                return window.location.href = '/'
              }
            })
        }).catch(function (error) {

        })
      }
    }).catch(function (error) {
      // Handle Errors here.
      var errorCode = error.code
      var errorMessage = error.message
      // The email of the user's account used.
      var email = error.email
      // The firebase.auth.AuthCredential type that was used.
      var credential = error.credential
      // ...
    })
  })
</script>